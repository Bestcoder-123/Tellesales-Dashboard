<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Beibora_Dashboard_Flip</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100vh;
      overflow: hidden;
      background: black;
      font-family: Arial, sans-serif;
    }

    .flip-container {
      perspective: 1500px;
      width: 100%;
      height: 100%;
      position: relative;
    }

    .flipper {
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transition: transform 4s ease-in-out;
    }

    .flip {
      transform: rotateY(180deg);
    }

    .front, .back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      top: 0;
      left: 0;
    }

    .back {
      transform: rotateY(180deg);
    }

    iframe {
      width: 100%;
      height: 100%;
      border: none;
      background: black;
    }

    header {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      background: linear-gradient(90deg, #001f1f, #004d4d);
      padding: 6px 0;
      text-align: center;
      font-size: 1em;
      font-weight: bold;
      color: #00ffcc;
      text-shadow: 1px 1px 4px black;
      border-bottom: 2px solid #00ffcc;
      z-index: 2;
    }

    /* ================= Password Modal ================= */
    .pw-modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .pw-modal {
      background: linear-gradient(180deg, #041616 0%, #003735 100%);
      padding: 24px;
      border-radius: 12px;
      width: 380px;
      max-width: calc(100% - 32px);
      box-shadow: 0 8px 40px rgba(0,0,0,0.8);
      color: #00ffd1;
      text-align: center;
      border: 2px solid rgba(0,255,204,0.1);
      font-family: Arial, sans-serif;
    }

    .pw-modal h2 {
      margin: 0 0 12px 0;
      font-size: 1.1rem;
      letter-spacing: 0.6px;
    }

    .pw-modal p {
      margin: 0 0 16px 0;
      font-size: 0.9rem;
      opacity: 0.85;
    }

    .pw-input {
      width: 100%;
      box-sizing: border-box;
      padding: 10px 12px;
      font-size: 1rem;
      border-radius: 6px;
      border: 1px solid rgba(0,255,204,0.12);
      background: rgba(255,255,255,0.02);
      color: #e6fff9;
      outline: none;
      margin-bottom: 12px;
    }

    .pw-actions {
      display: flex;
      gap: 8px;
      justify-content: center;
    }

    .pw-btn {
      padding: 8px 14px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.95rem;
      background: rgba(0,255,204,0.08);
      color: #00ffd1;
      transition: transform .08s ease;
    }

    .pw-btn:active { transform: translateY(1px); }
    .pw-btn.cancel { background: rgba(255,80,80,0.08); color: #ff8a8a; }

    .pw-error {
      color: #ff8080;
      font-size: 0.9rem;
      height: 1.1rem;
      margin-top: 8px;
      opacity: 0.95;
    }
  </style>

  <!-- 🔒 Password Protection (Forces Re-Auth After Browser Close) -->
  <script>
    const correctPassword = "Beibora@2025"; // change password here
    const storageKey = "auth_beibora";

    function createPasswordModal(onSuccess, onCancel) {
      const overlay = document.createElement('div');
      overlay.className = 'pw-modal-overlay';

      const modal = document.createElement('div');
      modal.className = 'pw-modal';
      modal.innerHTML = `
        <h2>Enter password to access Beibora Dashboard</h2>
        <p>Type your password below — characters are hidden for privacy.</p>
        <input id="pwInput" class="pw-input" type="password" placeholder="Password" />
        <div class="pw-actions">
          <button id="pwSubmit" class="pw-btn">Enter</button>
          <button id="pwCancel" class="pw-btn cancel">Cancel</button>
        </div>
        <div id="pwError" class="pw-error"></div>
      `;
      overlay.appendChild(modal);
      document.body.appendChild(overlay);

      const input = document.getElementById('pwInput');
      const submit = document.getElementById('pwSubmit');
      const cancel = document.getElementById('pwCancel');
      const error = document.getElementById('pwError');

      input.focus();

      function cleanUp() { overlay.remove(); }

      submit.onclick = () => {
        const val = input.value.trim();
        if (val === correctPassword) {
          sessionStorage.setItem(storageKey, 'true');
          cleanUp();
          onSuccess && onSuccess();
        } else {
          error.textContent = "Incorrect password. Try again.";
          input.value = "";
          input.focus();
        }
      };

      cancel.onclick = () => {
        cleanUp();
        onCancel && onCancel();
      };

      input.addEventListener("keydown", (e) => {
        if (e.key === "Enter") submit.click();
        if (e.key === "Escape") cancel.click();
      });
    }

    // ✅ Clear session on real browser close (forces re-login next time)
    window.addEventListener("unload", () => {
      sessionStorage.removeItem(storageKey);
    });

    // 🔍 Check authentication
    (function checkAuth() {
      const authenticated = sessionStorage.getItem(storageKey);
      if (!authenticated) {
        createPasswordModal(
          () => {}, // success
          () => {
            alert("Access denied.");
            window.location.href = "about:blank";
            throw new Error("Unauthorized access");
          }
        );
      }
    })();
  </script>
</head>

<body>

  <div class="flip-container">
    <div class="flipper" id="flipper">
      <!-- FRONT: Dashboard -->
      <div class="front">
        <iframe id="beiboraFrame"></iframe>
      </div>

      <!-- BACK: Banner -->
      <div class="back">
        <iframe id="bannerFrame"></iframe>
        <header id="overlayTitle"></header>
      </div>
    </div>
  </div>

  <script>
    const flipper = document.getElementById("flipper");
    const overlayTitle = document.getElementById("overlayTitle");
    const beiboraFrame = document.getElementById("beiboraFrame");
    const bannerFrame = document.getElementById("bannerFrame");

    // Load dashboards
    beiboraFrame.src = "Beibora_Telesales_Statistics.html?nocache=" + new Date().getTime();
    bannerFrame.src = "Banner.html?nocache=" + new Date().getTime();

    // Header clock
    function updateHeader() {
      const now = new Date();
      const formattedDate = now.toLocaleString('en-GB', {
        day: '2-digit',
        month: 'long',
        year: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      }).replace(',', '');

      const formattedTime = formattedDate.replace(/\b([A-Za-z]+)\b/, match => match.toUpperCase());
      overlayTitle.textContent = `BEIBORA TELESALES PERFORMANCE AS AT ${formattedTime} | # OPERATION NIGHT HAMMER`;
    }

    setInterval(updateHeader, 1000);
    updateHeader();

    // Flip timing
    const beiboraDuration = 60000; // 1 minute
    const bannerDuration = 10000;  // 10 seconds
    let showingBanner = false;
    let flipTimer;

    function flipCycle() {
      if (showingBanner) {
        flipper.classList.remove("flip");
        showingBanner = false;
        clearTimeout(flipTimer);
        flipTimer = setTimeout(flipCycle, beiboraDuration);
      } else {
        flipper.classList.add("flip");
        showingBanner = true;
        clearTimeout(flipTimer);
        flipTimer = setTimeout(flipCycle, bannerDuration);
      }
    }

    flipTimer = setTimeout(flipCycle, beiboraDuration);
  </script>

</body>
</html>

